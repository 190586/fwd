var Homepage=function(){var a={};return{initialize:function(){this.loadProfile();this.loadFirstMenu();this.loadSecondaryMenu();this.loadMainCarouselBar();this.loadMainStaticRight();this.loadWhyFwd();this.loadTestimonial();this.loadCelebrate();this.loadBebas();this.loadProduct();this.loadCustomerPlace();this.loadMobileMenu()},setScrollTo:function(b,c){$(b).on("click",function(d){d.preventDefault();$(window).scrollTo($(c),1000,{offset:0-$("#navbar-white").height()})})},loadFirstMenu:function(){$.getJSON("/home/list-menus/FIRST-MENU",function(b){$.each(b.RESULTS,function(c,f){var e=f.dataHref===1?"data-href":"href";var d=$(document.createElement("li")).append($(document.createElement("a")).attr(e,f.url).html(f.title));$(".first-menu").append(d)})})},loadSecondaryMenu:function(){var b=this;$.getJSON("/home/list-menus/SECONDARY-MENU",function(d){var c=0;$.each(d.RESULTS,function(e,h){var g=h.dataHref===true?"data-href":"href";var f=$(document.createElement("li")).append($(document.createElement("a")).attr(g,h.url).addClass("sec-menu-"+c).html(h.title));$(".secondary-menu").append(f);if(h.dataHref){b.setScrollTo(".sec-menu-"+c,h.url)}c++})})},loadMobileMenu:function(){var b=this;$.getJSON("/home/list-menus/MOBILE-MENU",function(e){var d=0;var c=$(document.createElement("ul"));$.each(e.RESULTS,function(f,j){var h=j.dataHref===true?"data-href":"href";var g=$(document.createElement("li")).append($(document.createElement("a")).attr("id","mob-menu-"+d).attr(h,j.url).append($(document.createElement("i")).addClass(j.imagePath)).append(j.title));c.append(g);if(j.dataHref){b.setScrollTo("#mob-menu-"+d,j.url)}d++});$("#mobile-menu").append(c)})},loadMainCarouselBar:function(){$.getJSON("/home/main-carousel-bar",function(b){$.each(b.RESULTS,function(c,d){$("#main-carousel").append('<img src="/public/images?path='+d.imagePath+'" alt="'+d.title+'" class="background img-responsive"></img>')});$(".jumbotron-slider").owlCarousel({loop:true,nav:false,items:1,autoplay:true,autoplayTimeout:5000,autoplayHoverPause:false})})},loadMainStaticRight:function(){$.getJSON("/home/main-static-right",function(b){$.each(b.RESULTS,function(c,d){$("#main-static-right").append('<div class="smalltron"><img src="/public/images?path='+d.imagePath+'" alt="'+d.title+'" class="smalltron-background img-responsive"></img></div>')})})},loadWhyFwd:function(){$.getJSON("/home/list-pages/WHY-INSURANCE",function(b){$.each(b.RESULTS,function(d,g){var f=g.title.split(" ");f[1]=f.length>1?f[1]:"";var e='<div class="col-xs-12 col-sm-6 col-md-3"><div class="pros-holder"><img src="/public/images?path='+g.iconPath+'" alt="'+g.title+'" class="img-responsive"></img><h3><span class="thick">'+f[0]+"</span> <br /> "+f[1]+'</h3><div class="detail">'+g.content+"</div>";e+=g.buttonText!=""&&g.buttonText!=null?'<a href="/home/'+g.code+'" class="btn btn-detail">'+g.buttonText+"</a></div></div>":"</div></div>";$("#why-fwd").append(e)});if($(window).width()>767){function c(d){var e=0;for(i=0;i<$(d).length;i++){if(e<=$(d).eq(i).height()){e=$(d).eq(i).height()}}$(d).height(e+20)}c(".homepage .section-2 .pros-holder h3");c(".pros-holder");$(".pros-holder").each(function(){$(this).height($(this).height()+$(this).find("a.btn-detail").height()+10)})}if($(window).width()<767){if($(".homepage .section-2 .testimonial-content img").height()<$(".homepage .section-2 .testimonial-content .content").height()){$(".homepage .section-2 .testimonial-content img").height($(".homepage .section-2 .testimonial-content .content").height()+50)}}})},loadTestimonial:function(){$.getJSON("/home/testimonial",function(c){$.each(c.RESULTS,function(d,f){var e="";if(f.prime){e='<div class="col-xs-12 col-md-6 featured-testimonial-col"><div class="bg"><img src="/public/images?path='+f.imageBackgroundPath+'" alt="Featured Testimonial" class="img-responsive"></img></div><div class="detail"><p class="big">'+f.name+'</p><p class="small">'+f.occupation+'</p><p class="small"><a href="'+f.website+'">'+f.website+'</a></p></div></div><div class="col-xs-12 col-md-6 featured-testimonial-col"><div class="featured-testimonial-text">'+f.content+"</div></div>";$("#primary-testimonial").append(e)}else{e='<div class="testimonial-content"><div class="profile-picture"><img src="/public/images?path='+f.avatarPath+'" alt="Testimoni Person" class="img-responsive"></img></div>'+f.content+'<div class="testimonial-user-detail"><p class="name">'+f.name+'</p><p class="detail">'+f.age+" Tahun, "+f.occupation+"</p></div></div>";$("#list-testimonial").append(e)}});$(".testimonial-list").addClass("owl-carousel");$(".testimonial-list").addClass("owl-theme");$(".testimonial-list").owlCarousel({loop:true,nav:true,dots:true,margin:29,responsive:{0:{items:1,stagePadding:60,dots:false},768:{items:3},992:{items:4}}});var b=0;$(".testimonial-content").each(function(){if(b<$(this).height()){b=$(this).height()+$(this).find(".testimonial-user-detail").height()+30}});$(".testimonial-content").height(b);$("#testi-prev").click(function(){$(".testimonial-list .owl-prev").trigger("click")});$("#testi-next").click(function(){$(".testimonial-list .owl-next").trigger("click")})});$(".btn-write-testimoni").on("click",function(){$(".modal-body").html("");$(".modal-body").load("testi-regist")})},resetTestimonial:function(){a={}},registerTestimonial:function(b){a=b},loadTemporaryTestimonial:function(){return a},saveTestimonial:function(b,c){if(b.avatarPathChanged){b.avatarPath=b.avatarPath.replace(/^data:image\/[a-z]+;base64,/,"")}b=JSON.stringify(b);$.ajax({dataType:"json",contentType:"application/json",type:"POST",url:"/api/testimonialscustom/",data:b,success:function(d){c("success")},error:function(){c("fail")}})},loadCelebrate:function(){$.getJSON("/home/celebrate",function(c){var d=c.RESULTS[0];var b='<div class="col-xs-12 col-sm-6 col-sm-offset-3 col-md-4 col-md-offset-4"><h2 class="section-title orange">'+d.title+"</h2>"+(d.breadcrumb!==null?d.breadcrumb:d.content)+"</div>";$("#celebrate").append(b);$("#celebrate-bg").attr("src","/public/images?path="+d.headerImagePath)})},loadBebas:function(){$.getJSON("/home/list-pages/BEBAS",function(d){var c=0;var b=d.RESULTS.reverse();$.each(b,function(f,h){var e=c<=1?"right":"left";var g='<div class="col-xs-12 col-sm-6 pl-0 pr-0"><div class="product-holder '+e+'"><img src="/public/images?path='+h.headerImagePath+'" alt="'+h.title+'" class="img-responsive"></img><a href="/home/'+h.code+'"><div class="product-desc"><h3>'+h.title+"</h3>"+h.breadcrumb+"</div></a></div></div>";$("#bebas").prepend(g);c++})})},loadProduct:function(){$.getJSON("/home/list-pages/PRODUCT",function(b){$.each(b.RESULTS,function(c,d){$("#product-list").append('<li><a href="/home/'+d.code+'">'+d.title+"</a></li>")})})},loadCustomerPlace:function(){$.getJSON("/home/list-pages/CUSTOMER-PLACE",function(b){$.each(b.RESULTS,function(c,d){$("#customer-place-list").append('<li><a href="/home/'+d.code+'">'+d.title+"</a></li>")})})},loadProfile:function(){$.getJSON("/home/profile",function(b){var c=b.RESULTS[0];$(".socmed-instagram").attr("href",c.instagramLink);$(".socmed-youtube").attr("href",c.youtubeLink);$(".socmed-facebook").attr("href",c.facebookLink);$(".socmed-twitter").attr("href",c.twitterLink);$(".hotline-number").html(c.hotline)})},readImage:function(c,e){if(c.length){var d=c[0];var b=new FileReader();b.onload=function(){data=b.result;e(data)};b.readAsDataURL(d)}else{e()}}}}();$(document).ready(function(){Homepage.initialize()});